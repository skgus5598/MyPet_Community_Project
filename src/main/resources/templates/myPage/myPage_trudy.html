<!DOCTYPE html>
<html lang="en" xmlns:th=http://www.thymeleaf.org>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Moschino | Minimalist Free HTML Portfolio by WowThemes.net</title>
    <!--jquery-->
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>

    <link rel='stylesheet' th:href='@{/static/css/woocommerce-layout.css}' type='text/css' media='all'/>
    <link rel='stylesheet' th:href='@{/static/css/woocommerce-smallscreen.css}' type='text/css' media='only screen and (max-width: 768px)'/>
    <link rel='stylesheet' th:href='@{/static/css/woocommerce.css}' type='text/css' media='all'/>
    <link rel='stylesheet' th:href='@{/static/css/font-awesome.min.css}' type='text/css' media='all'/>
    <link rel='stylesheet' th:href='@{/static/css/style.css}' type='text/css' media='all'/>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Oswald:400,500,700%7CRoboto:400,500,700%7CHerr+Von+Muellerhoff:400,500,700%7CQuattrocento+Sans:400,500,700' type='text/css' media='all'/>
    <link rel='stylesheet' th:href='@{/static/css/easy-responsive-shortcodes.css}' type='text/css' media='all'/>
    </head>
    <style>
      .site-main img{
            width: 100px;
            height: 100px;
        }
    #main-title{
        display: flex; 
        background-color: red; 
        width: 100%;
        height: 100px;
    }
    .trudy_main{
        background-color: aquamarine;
    }
    .trudy_main img{
        width: 100%;
        height: 350px;
    }

    </style>

    <script>

        $(function (){
          $.ajax({
              type : "GET",
              url : "/myPage/getTrudyList",
              success : function(list){
                  let html ="";
                  list.forEach(function(data){
                      html += "<div  style=\"display: flex; \">"
                      html += "<div style=\"width: 50%; text-align: center;\">"
                      html += "<img src='/files/download?files="+data.imgName+"'><br>"
                      html += "</div>"
                      html += "<div  style=\"background-color:red;width: 50%; \">"
                      html += "<label>"+data.trudyName +"</label><br>";
                      html += "<label>"+data.trudyGender +"</label><br>";
                      html += "<label>"+data.trudyType +"</label><br>";
                      html += "<label>"+data.trudyIntro +"</label><br>";
                      html += "<button>MOD</button> <button>DEL</button>"
                      html += "</div> </div>"
                  })
                  $(".trudy_main").html(html);
              },
              error : function(){
                  alert("errorrrrrr");
              }

          })

        });



        var isBool = true;
        function showAddForm(){
            if(isBool ==true){
                $("#addTrudy").show();
                isBool = false;
            }else{
                $("#addTrudy").hide();
                isBool = true;
            }
        }

        function addTrudyEvent(){
            var data = new FormData($("#insertForm")[0]);
            alert("data ? " + data);
            $("#btnSubmit").prop("disabled", true);

            $.ajax({
                type : "POST",
                url : "/myPage/insertForm",
                enctype : "multipart/form-data",
                processData : false,
                contentType : false,
                data : data,
                success : function(data){
                    location.reload(); //이럴꺼면 ajax를 쓸 필요가 없는건데...
                },
                error : function(){
                    alert("server error");
                }
            })
        }



    </script>


    <body class="home page page-template page-template-template-portfolio page-template-template-portfolio-php">
        <div id="page" >
            <div class="container" >
                <header id="masthead" class="site-header">
                <div class="site-branding" style="display: flex;">	
                    <div>
                        <h1 class="site-title"><a href="index.html" rel="home">Trudy</a></h1>
                        <h2 class="site-description">Minimalist Portfolio HTML Template</h2>
                    </div>
                    <div class="searchDiv">
                        <input type="text">
                        <button>search</button>
                    </div>
                    
                </div>
                <nav id="site-navigation" class="main-navigation" style="background-color: green;">
                <button class="menu-toggle">Menu</button>
                <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
                <div class="menu-menu-1-container">
                    <ul id="menu-menu-1" class="menu">
                        <li><a th:href="@{/newStory/main}">New Story</a></li>
                        <li><a th:href="@{/ttk/ttkMain}">Things To Know</a></li>
                        <li><a th:href="@{#}">Sharing Info</a></li>
                        <li><a th:href="@{/talk/talkMain}">Talk Talk</a></li>
                    </ul>
                </div>
                </nav>
                </header>
                <!-- #masthead -->
                <div id="content" class="site-content" style="background-color: blueviolet; display: flex;">
        <!--layoout Left-->				
                    <div class="layout-left" style="background-color: aqua; width: 15%;">
                        <li class="menubar">MENUBAR</li>
                            <ul class="test">
                                <li>testest</li>
                                <li>testest</li>
                                <li>testest</li>
                            </ul>
                    </div>	
                    <!--추후 사이드 슬라이드로 만들기 -->		
                    <script>
                        $(".menubar").click(function(){
                            if($(".test").is(":visible")){
                                $(".test").slideUp();
                            }else{
                                $(".test").slideDown();
                            }
                        });
                    
                    </script>
                    <div class="layout-main" style="background-color: yellow; width:75%;" >
                        <div id="primary" class="content-area column full">
                            <main id="main" class="site-main">
                                <div id="main-title">
                                    <div style="text-align: center;">                    
                                        <a href="#">
                                        <img src="https://cdn-icons-png.flaticon.com/128/7973/7973168.png"> <br>
                                        <b>STORY</b>  
                                        </a>
                                    </div>
                                    <div style="text-align: center;">                    
                                        <a href="#">
                                        <img src="https://cdn-icons-png.flaticon.com/128/7973/7973168.png"> <br>
                                        <b>BOARD</b>  
                                        </a>
                                    </div>
                                    <div style="text-align: center;">                    
                                        <a href="#">
                                        <img src="https://cdn-icons-png.flaticon.com/128/7973/7973168.png"> <br>
                                        <b>TRUDIES</b>  
                                        </a>
                                    </div>
                                </div>
                                <br><br>

                                <div style="text-align: right;">
                                    <button th:onclick="showAddForm()">+ADD TRUDY</button>
                                </div>
                                <br>
                                <!-- Add form-->
                                <div id="addTrudy" style="display: none">
                                    <div style="display: flex; ">
                                        <form id="insertForm"   enctype="multipart/form-data">
                                            <div style="width: 50%; text-align: center;">
                                                <input th:type="file" th:name="file" onchange="loadFile(this)">
                                            </div>
                                            <div  style="background-color:red;width: 50%; ">
                                                <div style="background-color:beige">
                                                    <input th:type="hidden" th:name="userId" th:value="test123">
                                                    <input th:type="text" th:name="trudyName" placeholder="TRUDY NAME">
                                                    <input th:type="text" th:name="trudyType" placeholder="TYPE ex) JINDO">
                                                    <input th:type="text" th:name="trudyAge" placeholder="AGE">
                                                    <input th:type="text" th:name="trudyGender" placeholder="GENDER">
                                                    <textarea th:name="trudyIntro" placeholder="Tell me something about your Trudy!"></textarea>
                                                </div>
                                                <div  style="background-color:green; text-align: end;">
                                                    <button id="btnSubmit" th:onclick="addTrudyEvent()">SUBMIT</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <br>

                                <div class="trudy_main">
<!--                                    <div  style="display: flex; ">  -->
<!--                                        <div style="width: 50%; text-align: center;">-->
<!--                                            <img src="https://i.pinimg.com/736x/34/5c/df/345cdf0b5c4b2e6324f731b7b161698b.jpg">-->
<!--                                        </div>-->
<!--                                        <div  style="background-color:red;width: 50%; ">-->
<!--                                            <div id="trudyList" style="background-color:beige">-->
<!--&lt;!&ndash;                                                <label><h3><b>SUNSHIMI</b> | 6years | female</h3></label>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <label>bacdefgswerbacdefgswerbacdef<br>gswerbacdefgswerbacdefgswer<br>gswerbacdefgswerbacdefgswer</label>&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>    &ndash;&gt;-->
<!--                                            <div  style="background-color:green; text-align: end;">-->
<!--                                                <button>MOD</button>-->
<!--                                                <button>DEL</button>-->
<!--                                            </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
 <!--                                   </div>  -->



                            </main>
                                  <!-- .grid -->
                                  <nav class="pagination">
                                    <span class="page-numbers current">1</span>
                                    <a class="page-numbers" href="#">2</a>
                                    <a class="next page-numbers" href="#">Next »</a>
                                    </nav>
                                    <br/>
                        </div>
                    </div>
                        <!-- #main -->
        <!--layout right-->
                    <div class="layout-right" style="background-color: greenyellow; width: 10%;">
                        <button style="color: blue;"> UPLOAD</button>
                        <button> MYPAGE</button>
                    </div>	
        
                    </div>
                    <!-- #primary -->
                </div>
                <!-- #content -->
            </div>
            <!-- .container -->
            <footer id="colophon" class="site-footer">
            <div class="container">
                <div class="site-info">
                    <h1 style="font-family: 'Herr Von Muellerhoff';color: #ccc;font-weight:300;text-align: center;margin-bottom:0;margin-top:0;line-height:1.4;font-size: 46px;">Moschino</h1>
                    Shared by <i class="fa fa-love"></i><a href="https://bootstrapthemes.co">BootstrapThemes</a>
        
                </div>
            </div>	
            </footer>
            <a href="#top" class="smoothup" title="Back to top"><span class="genericon genericon-collapse"></span></a>
        </div>
        <!-- #page -->
        <script th:src='@{/static/js/jquery.js}'></script>
        <script th:src='@{/static/js/plugins.js}'></script>
        <script th:src='@{/static/js/scripts.js}'></script>
        <script th:src='@{/static/js/masonry.pkgd.min.js}'></script>
    </body>
</html>